# 새로운 기능 가이드

## 1. AI 색상 추천 기능

### 개요
Google Gemini 2.0 Flash API를 사용하여 AI가 추천하는 색상 팔레트를 생성합니다.

### 설정 방법
1. **API 키 발급**: https://aistudio.google.com/app/apikey 에서 Gemini API 키를 무료로 발급받습니다.
2. **AI 모드 선택**: 메인 화면에서 "AI 색상 추천" 라디오 버튼을 선택합니다.
3. **설정 열기**: "AI 요청 설정" 버튼을 클릭합니다.
4. **API 키 입력**: 발급받은 API 키를 입력합니다.
5. **추가 설정**:
   - **팔레트당 색상 개수**: 3~10개 사이로 설정 (기본값: 5)
   - **키워드**: 원하는 색상 테마를 쉼표로 구분하여 입력 (예: ocean, calm, blue)
6. **API 키 테스트**: "API 키 테스트" 버튼으로 연결을 확인합니다.
7. **저장**: "저장" 버튼을 클릭하여 설정을 저장합니다.

### 사용 방법
1. AI 모드가 선택된 상태에서 "Generate" 버튼을 클릭합니다.
2. AI가 5개의 팔레트를 생성합니다 (각 팔레트는 설정한 색상 개수만큼 포함).
3. 생성된 팔레트가 화면에 표시됩니다.
4. 각 색상을 클릭하여 복사하거나 팔레트를 저장할 수 있습니다.

### 설정 파일
- **ai_config.json**: API 키, 색상 개수, 키워드 등이 저장됩니다.

---

## 2. 커스텀 색상 조합 기능

### 개요
사용자가 직접 색상 조합 규칙을 만들고 저장하여 재사용할 수 있습니다.

### 열기
- **메뉴**: Tools > 커스텀 색상 조합...

### 기능

#### 조합 생성
1. **새 조합** 버튼을 클릭합니다.
2. 조합 이름을 입력합니다.
3. 규칙을 추가합니다.

#### 규칙 유형
- **기본 색상**: 베이스 색상을 그대로 사용
- **색조 오프셋**: 색조를 지정한 각도만큼 이동 (-360° ~ 360°)
- **보색**: 지정한 각도의 보색 생성 (-360° ~ 360°, 기본 180°)
- **채도 조정**: 채도를 퍼센트만큼 증감 (-100% ~ 100%)
- **명도 조정**: 명도를 퍼센트만큼 증감 (-100% ~ 100%)
- **고정 색상**: 지정한 HEX 색상을 직접 사용

#### 규칙 추가/수정
1. **규칙 추가**: "규칙 추가" 버튼을 클릭하여 새 규칙을 추가합니다.
2. **규칙 수정**: 규칙을 선택하고 "규칙 수정" 버튼을 클릭하여 편집합니다.
3. **규칙 삭제**: 규칙을 선택하고 "규칙 삭제" 버튼을 클릭합니다.
4. **순서 변경**: "위로"/"아래로" 버튼으로 규칙 순서를 조정합니다.

#### 입력 검증
- **숫자 범위**: Spinbox를 사용하여 허용된 범위 내의 값만 입력 가능
- **HEX 색상**: #RRGGBB 형식만 허용 (예: #FF0000)
- **오류 메시지**: 잘못된 입력 시 명확한 오류 메시지 표시

#### 미리보기
- 규칙을 추가/수정할 때마다 하단의 미리보기 영역에서 실시간으로 결과를 확인할 수 있습니다.
- 미리보기 캔버스는 전체 너비로 확장되어 색상을 명확하게 볼 수 있습니다.

#### 저장 및 사용
1. **저장**: "저장" 버튼을 클릭하여 조합을 저장합니다.
2. **사용**: 메인 화면에서 "색상 조합 선택" 버튼을 클릭합니다.
3. **선택**: 커스텀 조합 섹션에서 원하는 조합을 체크합니다.
4. **적용**: "확인" 버튼을 클릭하면 HEX 모드 및 이미지 모드에서 커스텀 조합이 적용됩니다.

### 설정 파일
- **custom_harmonies.json**: 모든 커스텀 조합이 저장됩니다.

---

## 3. 색상 조합 선택 개선

### 스크롤 기능
- 색상 조합 선택 다이얼로그에 스크롤바가 추가되었습니다.
- 기본 제공 조합과 커스텀 조합을 모두 스크롤하며 선택할 수 있습니다.

### 커스텀 조합 통합
- 기본 제공 조합 아래에 "커스텀 조합:" 섹션이 추가됩니다.
- 저장된 모든 커스텀 조합이 체크박스로 표시됩니다.
- 체크한 조합은 팔레트 생성 시 자동으로 적용됩니다.

---

## 설치 방법

### 필수 패키지 설치
```bash
pip install -r requirements.txt
```

### 패키지 목록
- **Pillow**: 이미지 처리
- **numpy**: 색상 추출 및 계산
- **google-generativeai**: Gemini AI API (AI 기능 사용 시)

---

## 파일 구조

### 새로 추가된 파일
- **ai_color_recommender.py**: AI 색상 추천 모듈
  - `AIColorRecommender`: Gemini API 통합 및 팔레트 생성
  - `AISettings`: AI 설정 저장/로드
  
- **custom_harmony.py**: 커스텀 색상 조합 모듈
  - `CustomHarmonyManager`: 조합 CRUD 및 적용
  - `CustomHarmonyDialog`: 조합 편집 UI

- **requirements.txt**: Python 패키지 의존성

### 설정 파일
- **ai_config.json**: AI 설정 (API 키, 색상 개수, 키워드)
- **custom_harmonies.json**: 커스텀 조합 데이터

---

## 사용 예시

### AI 색상 추천
```
1. API 키 입력: AIza...
2. 팔레트당 색상 개수: 5
3. 키워드: sunset, warm, orange
4. Generate 클릭
5. 결과: 5개의 따뜻한 느낌의 팔레트 생성
```

### 커스텀 조합 예시
```
조합 이름: "Pastel Rainbow"
규칙:
  1. 기본 색상
  2. 색조 오프셋: +60°
  3. 색조 오프셋: +120°
  4. 채도 조정: -30%
  5. 명도 조정: +20%
결과: 베이스 색상에서 파생된 파스텔톤 무지개 색상 5개
```

---

## 주의사항

1. **API 키 보안**: AI API 키는 노출되지 않도록 주의하세요.
2. **API 사용량**: Gemini API는 무료 티어에 사용량 제한이 있을 수 있습니다.
3. **인터넷 연결**: AI 기능은 인터넷 연결이 필요합니다.
4. **입력 범위**: 커스텀 조합에서 숫자 입력 시 허용 범위를 확인하세요.
5. **HEX 형식**: 고정 색상 입력 시 #RRGGBB 형식을 사용하세요.
